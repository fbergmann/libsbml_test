## @configure_input@
##
## Filename    : Makefile.in
## Description : Makefile template for use by 'configure'
## Author(s)   : SBML Team <sbml-team@caltech.edu>
## Organization: California Institute of Technology
## Created     : 2004-05-31
## Revision    : $Id$
## Source      : $Source$
##
## Copyright 2004 California Institute of Technology and
## Japan Science and Technology Corporation.
##
## This library is free software; you can redistribute it and/or modify it
## under the terms of the GNU Lesser General Public License as published
## by the Free Software Foundation; either version 2.1 of the License, or
## any later version.
##
## This library is distributed in the hope that it will be useful, but
## WITHOUT ANY WARRANTY, WITHOUT EVEN THE IMPLIED WARRANTY OF
## MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.  The software and
## documentation provided hereunder is on an "as is" basis, and the
## California Institute of Technology and Japan Science and Technology
## Corporation have no obligations to provide maintenance, support,
## updates, enhancements or modifications.  In no event shall the
## California Institute of Technology or the Japan Science and Technology
## Corporation be liable to any party for direct, indirect, special,
## incidental or consequential damages, including lost profits, arising
## out of the use of this software and its documentation, even if the
## California Institute of Technology and/or Japan Science and Technology
## Corporation have been advised of the possibility of such damage.  See
## the GNU Lesser General Public License for more details.
##
## You should have received a copy of the GNU Lesser General Public License
## along with this library; if not, write to the Free Software Foundation,
## Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.
##
## The original code contained here was initially developed by:
##
##     Ben Bornstein
##     SBML Team
##     Control and Dynamical Systems, MC 107-81
##     California Institute of Technology
##     Pasadena, CA, 91125, USA
##
##     http://www.sbml.org
##     mailto:sbml-team@caltech.edu
##
## Contributor(s):
##   Michael Hucka <mhucka@caltech.edu> Wrote this Makefile.in.
##


# -----------------------------------------------------------------------------
# Configuration variables
# -----------------------------------------------------------------------------
# Some of the following are substituted automatically by `configure'.  If
# you are looking at "Makefile", do not edit these values; instead, run the
# configure script at the top level of the src tree.  It will recreate
# "Makefile".

include @top_srcdir@/config/makefile-common-vars.mk

# `srcdir' points to the current directory, but should be set by configure.
# `subdir' must be set manually to the relative dir under `srcdir'.  Don't 
# set `subdir' to an absolute path, or some make actions will fail.

srcdir  = @srcdir@
thisdir = .

# Variables `subdirs', `headers', `sources', `libraries', `extra_CPPFLAGS',
# `extra_CXXFLAGS', `extra_LDFLAGS', `extra_clean', and `distfiles' are
# used by the default rules in `makefile-common-actions.mk' included at the
# end.

ifneq ($(MAKECMDGOALS),dist)
  ifdef USE_EXPAT 
    subdirs = expat src bindings docs
  else
    subdirs = src bindings docs
  endif
else
  subdirs = expat src bindings docs win32
endif

# Variables `examples' and `xml-schemas' are local variables reused below.

examples = \
        examples/Makefile                                    \
        examples/convertSBML.c                               \
        examples/evaluateMath.c                              \
        examples/printSBML.c                                 \
        examples/README.txt                                  \
        examples/readSBML.c                                  \
        examples/translateMath.c                             \
        examples/util.c                                      \
        examples/util.h                                      \
        examples/validateSBML.c

xml-schemas = \
        xml-schemas/mathml2/common/common-attribs.xsd        \
        xml-schemas/mathml2/common/math.xsd                  \
        xml-schemas/mathml2/common/xlink-href.xsd            \
        xml-schemas/mathml2/content/arith.xsd                \
        xml-schemas/mathml2/content/calculus.xsd             \
        xml-schemas/mathml2/content/common-attrib.xsd        \
        xml-schemas/mathml2/content/constants.xsd            \
        xml-schemas/mathml2/content/constructs.xsd           \
        xml-schemas/mathml2/content/elementary-functions.xsd \
        xml-schemas/mathml2/content/functions.xsd            \
        xml-schemas/mathml2/content/linear-algebra.xsd       \
        xml-schemas/mathml2/content/logic.xsd                \
        xml-schemas/mathml2/content/relations.xsd            \
        xml-schemas/mathml2/content/semantics.xsd            \
        xml-schemas/mathml2/content/sets.xsd                 \
        xml-schemas/mathml2/content/statistics.xsd           \
        xml-schemas/mathml2/content/tokens.xsd               \
        xml-schemas/mathml2/content/vector-calculus.xsd      \
        xml-schemas/mathml2/mathml2.xsd                      \
        xml-schemas/mathml2/presentation/action.xsd          \
        xml-schemas/mathml2/presentation/characters.xsd      \
        xml-schemas/mathml2/presentation/common-attribs.xsd  \
        xml-schemas/mathml2/presentation/common-types.xsd    \
        xml-schemas/mathml2/presentation/error.xsd           \
        xml-schemas/mathml2/presentation/layout.xsd          \
        xml-schemas/mathml2/presentation/scripts.xsd         \
        xml-schemas/mathml2/presentation/space.xsd           \
        xml-schemas/mathml2/presentation/style.xsd           \
        xml-schemas/mathml2/presentation/table.xsd           \
        xml-schemas/mathml2/presentation/tokens.xsd          \
        xml-schemas/sbml/sbml-l1v1.xsd                       \
        xml-schemas/sbml/sbml-l1v2.xsd                       \
	xml-schemas/sbml/sbml-l2v1.xsd

# The files listed in `docs' are copied to the documentation directory
# during a `make install'.

docs = \
        AUTHORS.txt                                          \
        COPYING.html                                         \
        COPYING.txt                                          \
        NEWS.txt                                             \
        README.txt                                           \
        VERSION.txt                                          \
	$(examples)                                          \
	$(xml-schemas)

# `distfile' is the list of files used for creating distributions,
# something that only the libSBML developers should do.  The list of files
# here is in addition to the subdirectories listed in `subdirs'.  The
# latter are the object of `make dist' and the files that are collected
# are under the control of the makefiles in the subdirectories.

distfiles = \
        AUTHORS.txt                                          \
        ChangeLog.txt                                        \
        COPYING.html                                         \
        COPYING.txt                                          \
        NEWS.txt                                             \
        README.txt                                           \
        VERSION.txt                                          \
        Makefile.in                                          \
        aclocal.m4                                           \
        config/config.guess                                  \
        config/config.sub                                    \
        config/expat.m4                                      \
        config/install-sh                                    \
        config/java.m4                                       \
        config/libcheck.m4                                   \
        config/makefile-common-actions.mk                    \
        config/makefile-common-vars.mk.in                    \
        config/matlab.m4                                     \
        config/missing                                       \
        config/mkinstalldirs                                 \
        config/python.m4                                     \
        config/swig.m4                                       \
        config/xercesc.m4                                    \
        configure                                            \
        configure.ac                                         \
	$(examples)                                          \
	$(xml-schemas)

# The files listed in `extra_distclean' are items created by configure or
# make, and that are removed by the default rules for `make distclean' in
# makefile-common-actions.mk.

extra_distclean = config.status config.cache config.log autom4te.cache \
	src/sbml/config.h src/sbml/stamp-h1


# -----------------------------------------------------------------------------
# Primary build actions.
# -----------------------------------------------------------------------------

# The default rules in `makefile-common-actions.mk' know to interpret goals
# of the form `foo-recursive' to run 'make foo' in directories defined in
# variable `subdirs'.

all: configure Makefile all-recursive 


# -----------------------------------------------------------------------------
# Checking.
# -----------------------------------------------------------------------------

check: check-recursive


# -----------------------------------------------------------------------------
# Formatting documentation.
# -----------------------------------------------------------------------------

dvi: dvi-recursive

pdf: pdf-recursive

ps: ps-recursive

info: info-recursive

html: html-recursive


# -----------------------------------------------------------------------------
# Installation.
# -----------------------------------------------------------------------------

install: install-recursive install-docs-recursive install-docs

uninstall: uninstall-recursive

installcheck: installcheck-recursive


# -----------------------------------------------------------------------------
# Cleaning.
# -----------------------------------------------------------------------------

clean: clean-recursive

distclean: distclean-recursive

mostlyclean: mostlyclean-recursive

maintainer-clean: maintainer-clean-recursive


# -----------------------------------------------------------------------------
# Creating distribution (for libSBML maintainers only)
# -----------------------------------------------------------------------------

# The `make dist' command is only available from this top-level makefile.

remove_distdir = \
  { test ! -d $(DISTDIR) \
    || { find $(DISTDIR) -type d ! -perm -200 -exec chmod u+w {} ';' \
         && rm -fr $(DISTDIR); }; }

dist dist-gzip: dist-all
	if test -d $(DISTDIR); then \
	  GZIP="--best" tar -C $(DISTDIR)/.. -chozf $(DISTDIR).tar.gz $(notdir $(DISTDIR)); \
	  $(remove_distdir); \
	fi

dist-all: $(distfiles)
	@$(remove_distdir)
	mkdir -p $(DISTDIR)
	@list='$(distfiles)'; for file in $$list; do \
	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
	  if test "$$dir" != "$$file" && test "$$dir" != "."; then \
	    dir="$$dir"; \
	    $(MKINSTALLDIRS) "$(DISTDIR)/$$dir"; \
	  else \
	    dir=''; \
	  fi; \
	  if test -d $$d/$$file; then \
	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
	      cp -pR $(srcdir)/$$file $(DISTDIR)/$$dir || exit 1; \
	    fi; \
	    cp -pR $$d/$$file $(DISTDIR)/$$dir || exit 1; \
	  else \
	    test -f $(DISTDIR)/$$file \
	    || cp -p $$d/$$file $(DISTDIR)/$$file \
	    || exit 1; \
	  fi; \
	done
	@list='$(subdirs)'; for subdir in $$list; do \
	  if test "$$subdir" = .; then :; else \
	    test -d $(DISTDIR)/$$subdir \
	    || mkdir $(DISTDIR)/$$subdir \
	    || exit 1; \
	    $(MAKE) $(MAKEFLAGS) -wC $$subdir \
	        TOP_DISTDIR="$(TOP_DISTDIR)" \
	        DISTDIR=$(DISTDIR) \
	        dist \
	      || exit 1; \
	  fi; \
	done
	-@find $(DISTDIR) -type d ! -perm -777 -exec chmod a+rwx {} \; -o \
	  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
	  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
	  ! -type d ! -perm -444 -exec $(SHELL) $(INSTALL_SH) -c -m a+r {} {} \; \
	|| chmod -R a+r $(DISTDIR)

## This target untars the dist file and tries a VPATH configuration.  Then
## it guarantees that the distribution is self-contained by making another
## tarfile.
#distcheck: dist
#	$(remove_distdir)
#	GZIP=$(gzip_env) gunzip -c $(distdir).tar.gz | $(AMTAR) xf -
#	chmod -R a-w $(distdir); chmod a+w $(distdir)
#	mkdir $(distdir)/=build
#	mkdir $(distdir)/=inst
#	chmod a-w $(distdir)
#	dc_install_base=`$(am__cd) $(distdir)/=inst && pwd` \
#	  && dc_destdir="$${TMPDIR-/tmp}/am-dc-$$$$/" \
#	  && cd $(distdir)/=build \
#	  && ../configure --srcdir=.. --prefix="$$dc_install_base" \
#	    $(DISTCHECK_CONFIGURE_FLAGS) \
#	  && $(MAKE) $(AM_MAKEFLAGS) \
#	  && $(MAKE) $(AM_MAKEFLAGS) dvi \
#	  && $(MAKE) $(AM_MAKEFLAGS) check \
#	  && $(MAKE) $(AM_MAKEFLAGS) install \
#	  && $(MAKE) $(AM_MAKEFLAGS) installcheck \
#	  && $(MAKE) $(AM_MAKEFLAGS) uninstall \
#	  && $(MAKE) $(AM_MAKEFLAGS) distuninstallcheck_dir="$$dc_install_base" \
#	        distuninstallcheck \
#	  && chmod -R a-w "$$dc_install_base" \
#	  && ({ \
#	       (cd ../.. && $(MKINSTALLDIRS) "$$dc_destdir") \
#	       && $(MAKE) $(AM_MAKEFLAGS) DESTDIR="$$dc_destdir" install \
#	       && $(MAKE) $(AM_MAKEFLAGS) DESTDIR="$$dc_destdir" uninstall \
#	       && $(MAKE) $(AM_MAKEFLAGS) DESTDIR="$$dc_destdir" \
#	            distuninstallcheck_dir="$$dc_destdir" distuninstallcheck; \
#	      } || { rm -rf "$$dc_destdir"; exit 1; }) \
#	  && rm -rf "$$dc_destdir" \
#	  && $(MAKE) $(AM_MAKEFLAGS) dist-gzip \
#	  && rm -f $(distdir).tar.gz \
#	  && $(MAKE) $(AM_MAKEFLAGS) distcleancheck
#	$(remove_distdir)
#	@echo "$(distdir).tar.gz is ready for distribution" | \
#	  sed 'h;s/./=/g;p;x;p;x'

#distuninstallcheck:
#	cd $(distuninstallcheck_dir) \
#	&& test `find . -type f -print | wc -l` -le 1 \
#	   || { echo "ERROR: files left after uninstall:" ; \
#	        if test -n "$(DESTDIR)"; then \
#	          echo "  (check DESTDIR support)"; \
#	        fi ; \
#	        find . -type f -print ; \
#	        exit 1; } >&2

#distcleancheck: distclean
#	if test '$(srcdir)' = . ; then \
#	  echo "ERROR: distcleancheck can only run from a VPATH build" ; \
#	  exit 1 ; \
#	fi
#	test `find . -type f -print | wc -l` -eq 0 \
#	  || { echo "ERROR: files left in build directory after distclean:" ; \
#	       find -type f -print ; \
#	       exit 1; } >&2


# -----------------------------------------------------------------------------
# Miscellaneous.
# -----------------------------------------------------------------------------

include @top_srcdir@/config/makefile-common-actions.mk


# -----------------------------------------------------------------------------
# End.
# -----------------------------------------------------------------------------
