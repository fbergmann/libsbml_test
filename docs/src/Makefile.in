## @configure_input@
##
## File name   : Makefile.in
## Description : Makefile for libSBML documentation
## Author(s)   : Michael Hucka <mhucka@caltech.edu>
## Organization: CDS, Caltech
## Language    : Make
## Created     : 2000-10-17
## Revision    : Makefile,v 1.1.1.1 2002/12/05 23:59:38 mhucka Exp
##
## Copyright 2003-2004 California Institute of Technology and
## Japan Science and Technology Corporation.
##
## This library is free software; you can redistribute it and/or modify it
## under the terms of the GNU Lesser General Public License as published
## by the Free Software Foundation; either version 2.1 of the License, or
## any later version.
##
## This library is distributed in the hope that it will be useful, but
## WITHOUT ANY WARRANTY, WITHOUT EVEN THE IMPLIED WARRANTY OF
## MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.  The software and
## documentation provided hereunder is on an "as is" basis, and the
## California Institute of Technology and Japan Science and Technology
## Corporation have no obligations to provide maintenance, support,
## updates, enhancements or modifications.  In no event shall the
## California Institute of Technology or the Japan Science and Technology
## Corporation be liable to any party for direct, indirect, special,
## incidental or consequential damages, including lost profits, arising
## out of the use of this software and its documentation, even if the
## California Institute of Technology and/or Japan Science and Technology
## Corporation have been advised of the possibility of such damage.  See
## the GNU Lesser General Public License for more details.
##
## You should have received a copy of the GNU Lesser General Public License
## along with this library; if not, write to the Free Software Foundation,
## Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.
##
## The original code contained here was initially developed by:
##
##     Michael Hucka and Ben Bornstein
##     SBML Team
##     Control and Dynamical Systems, MC 107-81
##     California Institute of Technology
##     Pasadena, CA, 91125, USA
##
##     http://www.sbml.org
##     mailto:sbml-team@caltech.edu
##
## Contributor(s):
##


# -----------------------------------------------------------------------------
# Configuration variables
# -----------------------------------------------------------------------------
# Some of the following are substituted automatically by `configure'.  If
# you are looking at "Makefile", do not edit these values; instead, run the
# configure script at the top level of the src tree.  It will recreate
# "Makefile".

include @top_srcdir@/config/makefile-common-vars.mk

# `srcdir' points to the current directory, but should be set by configure.
# `subdir' must be set manually to the relative dir under srcdir.  Don't 
# set `subdir' to an absolute path, or some `make' actions will fail.

srcdir  = @srcdir@
thisdir = docs/src

# The following are convenience variables for use in this makefile.

manuals = libsbml-manual libsbml-api-ref
formats = pdf ps html

libsbml-manual-files  = $(foreach format,$(formats),libsbml-manual.$(format))
libsbml-api-ref-files = $(foreach format,$(formats),libsbml-api-ref.$(format))

# The variable `docs' is used in `makefile-common-actions.mk' for install-docs.

docs    = $(libsbml-manual-files) $(libsbml-api-ref-files) \
	libsbml-manual libsbml-api-ref 

# The variable `extra_distclean' is used in `makefile-common-actions.mk'
# for `make dist'.  Normally you wouldn't want to remove documentation
# files, but these are all generated files and directories.

extra_distclean = $(libsbml-manual-files) $(libsbml-api-ref-files) \
	libsbml-manual libsbml-api-ref 


# -----------------------------------------------------------------------------
# Primary build actions
# -----------------------------------------------------------------------------

# The default rules in `makefile-common-actions.mk' know to interpret goals
# of the form `foo-recursive' to run 'make foo' in directories defined in
# variable `subdirs'.

# The default action is to make everything, completely.
# If you would like to generate only a specific document, use the command
# "make CHOICE" where "CHOICE" is manual-pdf, api-pdf, api-html, etc.

all: $(formats)

dvi: $(foreach manual,$(manuals),$(manual).dvi)

pdf: $(foreach manual,$(manuals),$(manual).pdf)

ps: $(foreach manual,$(manuals),$(manual).ps)

html: $(foreach manual,$(manuals),$(manual).html)

info:
	@echo "We're sorry, but the info format is not supported."

# The following constructs some additional targets for convenience.
# Lets you use `make libsbml-manual' to create all the libsbml-manual files.

libsbml-manual:  $(libsbml-manual-files)
libsbml-api-ref: $(libsbml-api-ref-files)


# -----------------------------------------------------------------------------
# libsbml-manual
# -----------------------------------------------------------------------------

manual_html_dir = libsbml-manual

# Yes, run pdflatex 4 times after running bibtex.

libsbml-manual.pdf: libsbml-manual.tex pdffigs
	-@/bin/rm -f libsbml-manual.toc libsbml-manual.aux
	pdflatex libsbml-manual
	-bibtex libsbml-manual
	pdflatex libsbml-manual
	pdflatex libsbml-manual
	pdflatex libsbml-manual
	pdflatex libsbml-manual

libsbml-manual.dvi: libsbml-manual.tex
	-@/bin/rm -f libsbml-manual.toc libsbml-manual.aux
	latex libsbml-manual
	-bibtex libsbml-manual
	latex libsbml-manual
	latex libsbml-manual
	latex libsbml-manual

libsbml-manual.ps: libsbml-manual.tex libsbml-manual.dvi
	dvips -o libsbml-manual.ps libsbml-manual

libsbml-manual.html: sbmlmanual.perl
	latex2html -white -split +0 -show_section_numbers -image_type gif \
		   -no_navigation -local_icons -discard -antialias \
		   -t "libSBML Developer's Manual" \
		   -mkdir -dir $(manual_html_dir) libsbml-manual
	ln -s $(manual_html_dir)/libsbml-manual.html
	rm $(manual_html_dir)/index.html
	perl -pi -e "s|</HEAD>|</HEAD>\n<BASE HREF=\"libsbml-manual/\">|" \
		$(manual_html_dir)/libsbml-manual.html;
	perl -pi -e "s/<TITLE>Contents<\/TITLE>/<TITLE>libSBML Developer's Manual<\/TITLE>/" \
		$(manual_html_dir)/libsbml-manual.html;

sbmlmanual.perl:
	ln -s ../../../project/tex/sbmlmanual.perl


# -----------------------------------------------------------------------------
# libsbml-api-ref
# -----------------------------------------------------------------------------

.PHONY: libsbml-api-ref.html

libsbml-api-ref: $(foreach format,dvi pdf ps html,libsbml-api-ref.$(format))

libsbml-api-ref.pdf:  libsbml-api-ref.tex  api-files
	-@/bin/rm -f libsbml-api-ref.toc libsbml-api-ref.aux
	pdflatex libsbml-api-ref
	-bibtex libsbml-api-ref
	pdflatex libsbml-api-ref
	pdflatex libsbml-api-ref
	pdflatex libsbml-api-ref
	pdflatex libsbml-api-ref

libsbml-api-ref.dvi: libsbml-api-ref.tex
	-@/bin/rm -f libsbml-api-ref.toc libsbml-api-ref.aux
	latex libsbml-api-ref
	-bibtex libsbml-api-ref
	latex libsbml-api-ref
	latex libsbml-api-ref
	latex libsbml-api-ref

libsbml-api-ref.ps:  libsbml-api-ref.tex  libsbml-api-ref.dvi
	dvips -o libsbml-api-ref.ps libsbml-api-ref

libsbml-api-ref.html: api-files doxygen-api-manual

doxygen-output-dir = libsbml-api-ref

doxygen-api-manual: Doxyfile
	$(shell [ -d $(doxygen-output-dir) ] || mkdir $(doxygen-output-dir))
	doxygen Doxyfile
	cp graphics/sbml-logo-long-124x56.gif $(doxygen-output-dir)


# -----------------------------------------------------------------------------
# Miscellaneous helpers.
# -----------------------------------------------------------------------------

pdffigs:
	@(for i in graphics/*.eps; do echo "epstopdf $$i"; epstopdf $$i; done)

api-files:
	$(SHELL) createAPISections.sh ../../src/sbml


# -----------------------------------------------------------------------------
# Installation.
# -----------------------------------------------------------------------------

install: install-docs

uninstall:

installcheck:


# -----------------------------------------------------------------------------
# Common default rules.
# -----------------------------------------------------------------------------

include @top_srcdir@/config/makefile-common-actions.mk


# -----------------------------------------------------------------------------
# End.
# -----------------------------------------------------------------------------
